# StabFem


## *Latest news (30/01/2022)*

* New stable version 3.10 fully compatible with Ubuntu/MacOS/Windows10 and Octave/Matlab is released !
For a list of new features, see file [CHANGELOG.md](https://gitlab.com/stabfem/StabFem/-/blob/master/CHANGELOG.md)

* A presentation of the project (FreeFem days, 11 dec. 2018) is [here](https://gitlab.com/stabfem/StabFem/blob/master/99_Documentation/PRESENTATIONS/FreeFemDays_11dec2020.pdf)

* The showcase website of the project, with several examples and tuturials, is 
[here](https://stabfem.gitlab.io/StabFem/). The private version (for IMFT users) is [here](https://stabfem.gitlab.io/StabFem_Develop/)

* A reference manual is available: see 
[here](https://gitlab.com/stabfem/StabFem/-/jobs/artifacts/master/file/99_Documentation/MANUAL/main.pdf?job=makepdf) for stable version 
or [here](https://gitlab.com/stabfem/StabFem_Develop/-/jobs/artifacts/develop/file/99_Documentation/MANUAL/main.pdf?job=makepdf) for developer's version.


## General description of the project

StabFem is a Matlab/Octave interface to the FreeFem++ software allowing to use this powerful PDE solver within a practical working environment. Initially developped for fluid flow instability studies, it now includes a larger class of problems (acoustics, heat transfer, direct numerical simulations of fluid flows) and is easily customizable to include your own freefem++ programs.

The capacities of StabFem include :
- Plotting of finite-element data generated by FreeFem recognizing a number of finite-element structures (currently only 2D)

- A generic interface to the powerful mesh generation and adaptation facilities of FreeFem++,

- A Database manager with customizable indexing, allowing to store and reaccess all generated data to conduct easily parametric studies

- A web publishing system allowing to share work easily through the present website (see list of currently published work) . 


### StabFem for global stability analysis of fluid problems.

StabFem was initially developed as a driver for global stability analysis of fluid flow problems.

The classes of problems currently integrated are as follows:
- Incompressible flows (wakes and jets, flow through conduits, etc...)
- Compressible flows,
- Fluid-structure interactions for rigid bodies (spring-mounted objects or freely falling objects),
- Boussinesq flows (stratified flows, Rayleigh-Taylor convection, ...)
- Static free-surface problems (sloshing problems, liquid bridges, etc..)
- Free-surface flows with deformable surfaces using Arbitrary Lagrangian Eulerian (ALE) framework,
- Linear acoustics,
- (...)

The kind of computations currently implemented comprises :
- Computation of steady equilibrium solutions (base flow) using  Newton iteration, including arclength continuation,
- Computation of eigenvalue/eigenmodes, including interactive exploration of the spectrum, adjoint and stuctural sensitivity approaches, 
- Direct Numerical simulation (DNS)
- Computation of nonlinear limit cycles using Harmonic Balance approach, 
- Powerful and versatile mesh adaptation, 
- (...)

Currently, 3D flows can be handled, but geometries have to be 2D or axisymmetric.


## Example

Suppose you have three FreeFem++ programs Mesh.edp, Newton_2D.edp and Stab_2D.edp to define a mesh, compute a steady flow through Newton iteration and compute eigenvalues.

Here is the sequence of commands you should type in a Matlab terminal (or in a Matlab script)
to run these programs through the relevant drivers, and directly plot the results.


```
SF_Start(); % Stabfem initialization
ffmesh = SF_Mesh('Mesh.edp'); % constructs and imports a mesh from a freefem program
bf= SF_Launch('Newton_2D.edp','Mesh',ffmesh,'Options',{'Re',1}); % constructs a "guess" base flow for a low Re 
bf= SF_Launch('Newton_2D.edp','Init',bf,'Options',{'Re',100});% computes a Baseflow for Re = 100. 
% NB both these steps use the generic driver "SF_Launch". See chapter 2 of manual.
SF_Plot(bf,'p');  % plot the pressure with color levels
hold on; SF_Plot('psi','contour','only')
bf = Sf_Adapt(bf);      % adapts the mesh
shift=-0.1549 + 5.343i;
[ev,em] = SF_Stability(bf,'solver','Stab_2d.edp','shift',shift,'nev',1) % computes one eigenmode. 
% NB this example uses the stability-oriented driver "SF_Stability". See chapter 4 of manual.
SF_Plot(em,’ux.re’) % plots the real part of the axial velocity component of the eigenmode
```

A large number of other examples are available on the gitlab-pages StabFem website. Do not hesitate to browse them and to adapt them to your needs !

## How to install and use this software ?

### Requiremements

Before installation you need to have :

- Linux (Ubuntu 16 or newer), MacOS (10.0 or newer), Windows 10 (for other systems please contact the developers)

- [Octave](https://www.gnu.org/software/octave/Octave) (5.1.0 or later)  or [Matlab](https://www.mathworks.com/products/matlab.html) (2017b or later)

- FreeFem++ (version 4.0 or later).

For students and casual users it is advised to downoad one of the precompiled versions of FreeFem available 
[here](http://www3.freefem.org).

For advanced users and developers it is advised to compile FreeFem from the full sources available [here](https://github.com/FreeFem/FreeFem-sources/releases).

- If using windows 10 you may additionnally need to download  [git](https://gitforwindows.org).



### StabFem Installation

- For students and casual users it is advised to simply download a single branch by clicking the "download" button.

- For advanced users it is advised to clone the full project by typing the following command in a shell or git terminal:

```
git clone https://gitlab.com/stabfem/StabFem
```

Once you have downloaded everything, launch matlab (or Octave), open any of the scripts of the project and simply run it !

It is advised to start with one of the following tutorial scripts :


- [STABLE_CASES/EXAMPLE_Lshape/SCRIPT_Lshape.m](https://stabfem.gitlab.io/StabFem/stable/lshape/SCRIPT_Lshape.html) for a simple example of using StabFem for linear stability analysis of a wake flow.


- [STABLE_CASES/CYLINDER/CYLINDER_LINEAR.m](https://stabfem.gitlab.io/StabFem//CYLINDER/CYLINDER_LINEAR.html) for a simple example of using StabFem as a Matlab/Octave interface for 
FreeFem++.

These examples are also described in chapter 2 and 4 of the manual, respectively.

In case of problems you may check the file [Instalationnotes.md](https://gitlab.com/stabfem/StabFem/blob/master/InstalationNotes.md) 

## Getting started ?

The StabFem project contains a large number of tutorial examples, either on the showcase 
[website](https://stabfem.gitlab.io/StabFem/) or in the 
[refecence manual](https://gitlab.com/stabfem/StabFem/blob/develop/99_Documentation/MANUAL/main.pdf). Different starting points can be recommended depending upon your needs :

1. If you are interested in using StabFem for global stability analyses of a class of problem already implemented in the project, we recommend that you first study the[STABLE_CASES/CYLINDER/CYLINDER_LINEAR.m](https://stabfem.gitlab.io/StabFem//CYLINDER/CYLINDER_LINEAR.html)
tutorial example, along with the [AMR (2019)](https://gitlab.com/stabfem/stabfem_publications/-/blob/master/Fabre_etal_AMR_2018.pdf)
 research paper. Then you may look at section 3.5 of the manual to see how to customize to your case of interest.
 

2. If you are interested in using StabFem as a Matlab/Octave interface to FreeFem, but not specifically for flow instability studies, we recommend that you study the tutorial example 
[STABLE_CASES/EXAMPLE_Lshape/SCRIPT_Lshape.m](https://stabfem.gitlab.io/StabFem/stable/lshape/SCRIPT_Lshape.html) along with chapter 2 of the manual.

3. If you are already familiar with FreeFem and want to incorporate your own codes into the project, it is recommended that you study chapters 2 and 3 of the manual.

4. If you do not have/like the Matlab/Octave interface and are only interested in the FreeFem++ part of the project, good news ! you can perfectly use the FreeFem programs  outside of the interface (for instance in a shell terminal or script). Section 3.6 of the manual will explain how to do this.




## Authors :

The Matlab/Octave part of the software is by D. Fabre, J. Sierra, D. Ferreira & M. Pigou (2017-).

The FreeFem part incorporates a number of sources from J. Tchoufag, P. Bonnefis, J. Mougel, V. Citro, F. Giannetti, O. Marquet, and many other students and collegues.

The plotting part of the interface uses the function ffpdeplot (alternative to pdeplot and fully compatible with Octave) developped by [Chloros](https://github.com/samplemaker/freefem_matlab_octave_plot). 


## History

- 10/2020 : stable version 3.7. There are now 25 test-cases in the non-regression runner and more than 40 examples published on the website, including sources for 5 published papers.
- 09/2020 : Introducing usage of lineic meshes in free-surface oscillation problems.
- 06/2020 : stable version 3.5 with new generic interface and fully operational website
- 01/2020 : stable version 3.0 is released.
- 12/2019 : new management of the website of the project (in progress).
- 11/2019 : most issues with octave and windows are fixed.
- 11/2019 : first usage of StabFem for teaching (UPS, Toulouse)
- 10/2019 : an automatic non-regression runner is now operational : a number of "autorun.m" test-cases are automatically run at each new commit on the develop branch and/or each merge request.
- 09/2019 : new management of the database.
- 09/2019 : redesign of the automatic configuration (SF_core_start), including automatic checks for most systems (including windows 10).  
- 07/2019 : The project moved to GitLab. The previous GitHub site is still operational but will soon not be maintained any more.
- 02/2019 : A mailing list is now available. To register please go [here](https://groupes.renater.fr/sympa/info/stabfem-dev) and click on "s'abonner".
- 02/2019 : A research paper advertising the software was published in Rev. Appl. Mech. [See here:](https://gitlab.com/stabfem/StabFem/blob/master/99_Documentation/ARTICLE_STABFEM/ARTICLE_ASME_Accepted.pdf)
- 13/12/2018 : A presentation of the main functionalities of the StabFem project was presented at FreeFem++ days.
The main document of the presentation is available [here](https://gitlab.com/stabfem/StabFem/blob/master/99_Documentation/PRESENTATIONS/Beamer_13dec2018_handout.pdf). The presentation is also based on three commented programs : [Basic example](https://gitlab.com/stabfem/StabFem/blob/master/STABLE_CASES/EXAMPLE_Lshape/SCRIPT_Lshape.pdf),
[acoustic pipes](https://gitlab.com/stabfem/StabFem/blob/master/STABLE_CASES/ACOUSTICS_PIPES/html/Acoustic%20field%20in%20a%20pipe%20with%20harmonic%20forcing%20at%20the%20bottom.pdf),
and [DNS cylinder](https://gitlab.com/stabfem/StabFem/blob/master/DEVELOPMENT_CASES/CYLINDER_DNS/html/SCRIPT_DNS_EXAMPLE.pdf).
- 2018 : a Manual is in progress. [See here:](https://github.com/erbafdavid/StabFem/blob/master/99_Documentation/MANUAL/main.pdf)
- 2018 : An automatic documentation using Doxygen is now available
- 2018 : Compatibility with Octave is now supported ! Test-cases "EXAMPLE_Lshape", "CYLINDER" and "ROTATING_POLYGONS" are successful. (a few points still may have to be fixed in other cases) 
- 2018 : Compatibility with windows 10 is now supported (check test-cases "EXAMPPLES_Lshape", "CYLINDER" and "POROUSDISK")
- 2018 : DNS is now possible within StabFem :)
- 07/2017 : very first upload of the project on GitHub



